; Efi Symple File System

EFI_SIMPLE_FILE_SYSTEM_PROTOCOL_GUID     fix 0x0964e5b22,0x6459,0x11d2,0x8e,0x39,0x00,0xa0,0xc9,0x69,0x72,0x3b
EFI_SIMPLE_FILE_SYSTEM_PROTOCOL_REVISION fix 0x00010000

struc EFI_SIMPLE_FILE_SYSTEM_PROTOCOL {
    .Revision   UINT64A
    .OpenVolume PTR EFI_SIMPLE_FILE_SYSTEM_PROTOCOL_OpenVolume
}
STRUCT EFI_SIMPLE_FILE_SYSTEM_PROTOCOL

EFI_SIMPLE_FILE_SYSTEM_PROTOCOL_Init __NAME, __PTR {

    macro __NAME#.#GetRevision {
        mov rax, [__PTR]
        mov rax, [rax + EFI_SIMPLE_FILE_SYSTEM_PROTOCOL.Revision]
    }

    ; EFI_SIMPLE_FILE_SYSTEM_PROTOCOL_OpenVolume macro
    __EFI_CALL_2__ EFI_SIMPLE_FILE_SYSTEM_PROTOCOL, OpenVolume, IN This PTR EFI_SIMPLE_FILE_SYSTEM_PROTOCOL, OUT Root PTR PTR EFI_FILE_PROTOCOL
    macro __NAME#.#OpenVolume Root {
        EFI_SIMPLE_FILE_SYSTEM_PROTOCOL_OpenVolume [__PTR], [__PTR], Root
    }
}
